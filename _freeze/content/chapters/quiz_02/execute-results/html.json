{
  "hash": "684d7d4e72ebacf7d8133e3b064155a3",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Quiz: Column-level transformations\"\nformat:\n    revealjs:\n        slide-number: true\n        toc: true\n        code-fold: false\n        code-tools: true\n\n---\n\n## Question 1\n\n::: {.callout}\n\n:::\n\n::: {.callout-tip collapse=\"true\"}\n### Solution\n:::\n\n\n## Question 2\n\n::: {.callout}\nIs the following statement true or false?\n\n> The output of these two snippets is the same: \n\n```{.python}\nencode = ApplyToCols(OneHotEncoder(sparse_output=False), cols=s.string())\nscale = ApplyToCols(StandardScaler(), cols=s.numeric())\n```\n```{.python}\ncase_1 = make_pipeline(encode, scale)\ncase_1.fit_transform(df)\n```\n\n```{.python}\ncase_2 = make_pipeline(scale, encode)\ncase_2.fit_transform(df)\n```\n:::\n\n::: {.callout-tip collapse=\"true\"}\n### Solution\nAnswer: False. \n\nThe order of the operations matters, and a different order leads to different \nresults.\n\n::: {#e126d776 .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nfrom sklearn.pipeline import make_pipeline\nfrom skrub import SelectCols, ApplyToCols, ApplyToFrame\nfrom sklearn.preprocessing import OneHotEncoder, StandardScaler\nimport skrub.selectors as s \n\nn_patients = 5\ndf = pd.DataFrame(\n    {\n        \"patient_id\": [f\"P{i:03d}\" for i in range(n_patients)],\n        \"age\": np.random.randint(18, 80, size=n_patients),\n        \"sex\": np.random.choice([\"M\", \"F\"], size=n_patients),\n    }\n)\nencode = ApplyToCols(OneHotEncoder(sparse_output=False), cols=s.string())\nscale = ApplyToCols(StandardScaler(), cols=s.numeric())\n```\n:::\n\n\n::: {#cb4bb19c .cell execution_count=2}\n``` {.python .cell-code}\ncase_1 = make_pipeline(encode, scale)\ndf_1 = case_1.fit_transform(df)\ndf_1\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>patient_id_P000</th>\n      <th>patient_id_P001</th>\n      <th>patient_id_P002</th>\n      <th>patient_id_P003</th>\n      <th>patient_id_P004</th>\n      <th>age</th>\n      <th>sex_F</th>\n      <th>sex_M</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2.0</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-1.189365</td>\n      <td>0.816497</td>\n      <td>-0.816497</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>-0.5</td>\n      <td>2.0</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-1.254714</td>\n      <td>-1.224745</td>\n      <td>1.224745</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>2.0</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>0.901826</td>\n      <td>-1.224745</td>\n      <td>1.224745</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>2.0</td>\n      <td>-0.5</td>\n      <td>0.836476</td>\n      <td>0.816497</td>\n      <td>-0.816497</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>-0.5</td>\n      <td>2.0</td>\n      <td>0.705777</td>\n      <td>0.816497</td>\n      <td>-0.816497</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#22f1022a .cell execution_count=3}\n``` {.python .cell-code}\ncase_2 = make_pipeline(scale, encode)\ndf_2 = case_2.fit_transform(df)\ndf_2\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>patient_id_P000</th>\n      <th>patient_id_P001</th>\n      <th>patient_id_P002</th>\n      <th>patient_id_P003</th>\n      <th>patient_id_P004</th>\n      <th>age</th>\n      <th>sex_F</th>\n      <th>sex_M</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>-1.189365</td>\n      <td>1.0</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>-1.254714</td>\n      <td>0.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.901826</td>\n      <td>0.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>0.836476</td>\n      <td>1.0</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>0.0</td>\n      <td>1.0</td>\n      <td>0.705777</td>\n      <td>1.0</td>\n      <td>0.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n:::\n\n## Question 3\n\n::: {.callout}\n\n:::\n\n::: {.callout-tip}\n### Solution\n:::\n\n## Question 4\n\n::: {.callout}\n\n:::\n\n::: {.callout-tip}\n### Solution\n:::\n\n## Question 5\n\n::: {.callout}\n\n:::\n\n::: {.callout-tip}\n### Solution\n:::\n\n## Question 6\n\n::: {.callout}\n\n:::\n\n::: {.callout-tip}\n### Solution\n:::\n\n",
    "supporting": [
      "quiz_02_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}